<%= tag.div(id: element_id(@dossier), class: 'card') do %>

  <%# card header %>
  <div class="card-header">
    <div class="row">
      <div class="col-md-6 col-12 text-md-left text-center">
        <h2 class="cord-title mt-2">
          <%= icon(@dossier) { @dossier.title } %>
        </h2>
        <h5 class="text-muted">
          <%= icon(@dossier.dossierable) { @dossier.dossierable.name } %>
        </h5>
      </div>
      <div class="col-md-6 col-12 text-md-right text-center">
        <%= render partial: 'context_menu' %>
      </div>
    </div>
  </div>

  <%# card body %>
  <div class="card-body dossier">

    <div class="row">
      <div class="col">
        <p class="leader text-muted"><%= @dossier.description %></p>
        <div id="content">
          <%= markdown @dossier.content %>
        </div>
        <div class="file_attachments mt-3">
          <h5><%= t('activerecord.attributes.dossier.files') %></h5>
          <ul>
            <% @dossier.files.each do |file| %>
              <li class="file_attachment">
                <%= link_to(
                  file.filename,
                  rails_blob_path(file, disposition: 'attachment'))
                %>
            </li>
          <% end %>
          </ul>
        </div>
      </div>
    </div>

  </div>

  <%# card footer %>
  <div class="card-footer text-muted">
    <div class="row">
      <div class="col-md-6 col-12 text-md-left text-center mt-2">
        <small>
          TODO
          <%# FIXME: Fix dossiers an notes to have timestamps %>
          <%# time_ago_in_words(@dossier.updated_at.localtime) %>
        </small>
      </div>
      <div class="col-md-6 col-12 text-md-right text-center">
        <%= render partial: 'context_menu' %>
      </div>
    </div>
  </div>
<% end %>
